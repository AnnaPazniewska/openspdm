################## Use Spin to do Model checking ############################
1) Visio Diagram focusing on describing more complete state transitions:
   spdm_ver5_extend.vsdx // Transitions regarding all the phases (error related transitions are saved after vendor defined request due to space limit)
   spdm_ver7_secVad_firstThree.vsdx // Transitions regarding mainly the normal-session phases to provide the skeleton for manually filling contents of these phases later

2) Use ACES plugin "Export XML" to generate the corresponding XML-format graph.
   TBD
   Convert spdm_ver5_extend.vsdx to spdm_ver5_extend.xml
   Convert spdm_ver7_secVad_firstThree.vsdx to spdm_ver7_export.xml

3) Transport XML code to Promela code and run Promela code (Use python2.x)
   $ cd <ModelCheckerPath/Tools>
   $ python vsdxml_parser.py ../Src/spdm_ver5_extend.xml # Output spdm_ver5_extend.xml.pml
   $ python vsdxml_parser.py ../Src/spdm_ver7_export.xml # Output spdm_ver7_export.xml.pml

4) Install Spin
   Install spin on Linux
   $ sudo apt install byacc
   $ git clone https://github.com/nimble-code/Spin
   $ cd Spin/Src
   $ make
   $ export SPIN_PATH=<SPIN_FOLDER/Src>
   $ export PATH=$PATH:$SPIN_PATH

5) Whole skeleton model
   Run simulation:
   $ spin spdm_ver5_extend.xml.pml

   Generate verifier and run for formal verification:
   $ spin -a ../Src/spdm_ver5_extend.xml.pml 
   $ cc -DNOREDUCE -DVECTORSZ=1000000 -g -o pan pan.c 
   $ ./pan -m9999999 -a -n  -N pNUM (NUM is the number of LTL property you want to verify)

6) Skeleton model for normal phases
   Run simulation:
   $ spin spdm_ver7_export.xml.pml

   Generate verifier and run for formal verification:
   $ spin -a ../Src/spdm_ver7_export.xml.pml (Run ../Src/spdm_ver7_export.xml.pml.test if an error is found)
   $ cc -DNOREDUCE -DVECTORSZ=1000000 -g -o pan pan.c 
   $ ./pan -m9999999 -a -n  -N pNUM (NUM is the number of LTL property you want to verify)

   ## Implement functionalities of normal phases of Skeleton model and check properties:
   Model that contains functionalities of normal phases:

     spdm_ver7_content.pml (build upon the skeleton model spdm_ver7_export.xml.pml)
   
   Run simulation:
   $ spin spdm_ver7_content.pml

   Generate verifier and run for formal verification:
   $ spin -a ../Src/spdm_ver7_content.pml 
   $ cc -DNOREDUCE -DVECTORSZ=1000000 -g -o pan pan.c

   Check all the properties' verification results:
   $ ./check_properties.sh > property_test.res
   
7) CBMC verifiction:

   To compile and run for CBMC:
   $ cd $HOME/openspdm
   $ make TOOLCHAIN=CBMC ARCH=X64 TARGET=DEBUG CRYPTO=MbedTls -e WORKSPACE=.

   $ cbmc Build/DEBUG_CBMC/X64/SpdmRequesterTest

   Test memory property:
   $ cbmc Build/DEBUG_CBMC/X64/SpdmRequesterTest --bounds-check --unwind 6 --unwinding-assertions --object-bits 10
   
The flag can be changed to others, see --help for more choices


################## PlantUML transition-diagram experiment ############################
1) Prepare JDK environment
   Refer to https://docs.oracle.com/en/java/javase/14/install/overview-jdk-installation.html
   > set JAVA_HOME=<JAVA_HOME_PATH>
   > set PATH=%PATH%;%JAVE_HOME%\bin

2) Download plantuml http://sourceforge.net/projects/plantuml/files/plantuml.jar/download    
   
3) PlantUML transition-diagram experiment
   > java -jar plantuml.jar <path/to/spdm_ver5.txt>
   
   > spdm_ver5.png will be generated by cmd

